## Design Draft

### DTO

dto 的结构如下：

```
─── dto
    ├── AcademyDTO.java
    ├── MemberResponseDTO.java
    ├── TeamDTO.java // 这是对 model 的封装
    └── captain // 文件夹是接口名字 针对有需要的不同接口设计的不同的 DTO 使用时需要转换
        └── TeamDTO.java
        └── ...
```

### 使用流程

1. 超级管理员创建比赛 并且配置比赛的信息
2. 二级管理员（老师）操作 User 表 分配 role->0(Captain)
3. Captain 登录系统 并且创建队伍 此时操作 Member 表

### JWT

### DTO

// TODO
使用 V2 的接口，使用了 Java 14+ 引入的 Record 特性，这使得它们都是不可变的数据传输对象，自动生成了构造器、getter、equals、hashCode 和 toString 方法。
src/main/java/fun/sast/evento/lark/api/value/V2.java

## 改进建议

### 架构改进

1. **分层结构优化**：
   - 引入领域层（Domain Layer）来封装核心业务逻辑，将业务规则与服务层分离
   - 考虑采用领域驱动设计（DDD）来更好地处理复杂业务逻辑

2. **接口设计**：
   - 为服务接口添加更完善的文档，如使用 SpringDoc/OpenAPI 进行 API 文档自动生成
   - 统一 REST API 的设计风格，包括资源命名、HTTP 方法使用等

3. **配置管理**：
   - 将配置参数外部化，使用 Spring Cloud Config 或环境变量管理
   - 针对不同环境（开发、测试、生产）创建不同的配置文件

### 代码质量改进

1. **代码规范**：
   - 建立统一的编码规范，如 Google Java Style Guide
   - 使用 Checkstyle、PMD 或 SonarQube 等静态代码分析工具

2. **测试覆盖**：
   - 增加单元测试，提高代码测试覆盖率
   - 添加集成测试和端到端测试以验证系统功能

3. **依赖注入**：
   - 减少直接使用 `@Autowired` 进行字段注入，改用构造函数注入以提高测试性

### 安全性改进

1. **权限管理优化**：
   - 将硬编码的角色值（如 `@RequireRole({2, 3})`）替换为枚举或常量
   - 考虑引入 Spring Security 进行更完善的认证和授权管理

2. **安全最佳实践**：
   - 实现 CSRF 保护和 XSS 防御
   - 为敏感数据添加加密和数据脱敏处理
   - 实现 JWT 密钥的安全存储（如已在 TODO 中提到）

3. **日志与监控**：
   - 添加安全审计日志记录关键操作
   - 实现异常监控和告警机制

### 性能和可伸缩性

1. **缓存策略**：
   - 引入缓存层（如 Redis）减少数据库访问
   - 实现合理的缓存失效策略

2. **数据库优化**：
   - 优化数据库查询和索引
   - 考虑分库分表策略以应对数据增长

3. **异步处理**：
   - 对耗时操作采用异步处理方式
   - 考虑使用消息队列处理削峰填谷

### 开发流程改进

1. **版本控制**：
   - 建立 Git 分支策略（如 Git Flow）
   - 实施代码审查流程

2. **持续集成/持续部署**：
   - 建立 CI/CD 流水线
   - 自动化测试和部署流程

3. **文档完善**：
   - 完善技术文档和设计文档
   - 提供详细的开发者指南和操作手册